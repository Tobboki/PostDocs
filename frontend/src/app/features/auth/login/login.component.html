<section class="container mt-5 d-flex justify-content-center align-items-center" style="min-height: 100vh;">
  <div class="row border rounded-4 p-3">
    <div class="col-lg-6 py-5 bg-body-secondary rounded-4 text-center">
      <img src="../../../../assets/illustrations/Login-light.png" alt="Image" class="img-fluid">
    </div>
    <div class="col-lg-6 py-5">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="mb-4">
            <h3>Sign In</h3>
            <p class="mb-2 text-body-50 fw-semibold">Manage your posts effortlessly with our posts dashboard with ease and efficiency.</p>
          </div>

          <form class="form" [formGroup]="loginForm" (ngSubmit)="login()">
            <!-- Username Input -->
            <input 
              type="text" 
              class="form-control bg-body-secondary py-2 rounded-bottom-0" 
              [class.border-danger]="
                loginForm.get('username')?.invalid 
                && (loginForm.get('username')?.dirty || loginForm.get('username')?.touched)
              "
              id="username" 
              placeholder="Username" 
              formControlName="username"
              required 
            >

            <!-- Username error massages -->
            @if (loginForm.get('username')?.touched && loginForm.get('username')?.invalid) {

              <!-- Username required -->
              @if (loginForm.get('username')?.hasError('required')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Username is required.</small>
                </div>
              }

              <!-- Username length -->
              @if (loginForm.get('username')?.hasError('minlength') || loginForm.get('username')?.hasError('maxlength')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Username must be between 3 and 18 characters.</small>
                </div>
              }

              <!-- Username Doesn't exist -->
              @if (loginForm.get('username')?.hasError('invalidUsername')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Username is incorrect.</small>
                </div>
              }

              <!-- Username contains whitespace -->
              @if (loginForm.get('username')?.hasError('whitespace')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">whitespace is not allowed in username.</small>
                </div>
              }

              <!-- Username contains invalid special chars -->
              @if (loginForm.get('username')?.hasError('invalidSpecialChar')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Can't use special characters other than '_'.</small>
                </div>
              }
            }

            <!-- Password Input -->
            <div 
              class="input-group border bg-body-secondary rounded rounded-top-0"
              [class.border-danger]="
                loginForm.get('password')?.invalid 
                && (loginForm.get('password')?.dirty || loginForm.get('password')?.touched)
              "
            >
              <input
                [type]="showPassword ? 'text' : 'password'"
                class="form-control bg-body-secondary py-2 rounded-top-0"
                
                formControlName="password"
                placeholder="Password"
              />
              <span
                class="input-group-text bg-body-secondary"
                style="cursor: pointer;"
                (click)="toggleShowPassword()"
              >
              @if (showPassword) {
                <i class="fa-solid fa-eye-slash"></i>
              } @else {
                <i class="fa-solid fa-eye"></i>
              }
              </span>
            </div>

            <!-- Password error massages -->
            @if (loginForm.get('password')?.touched && loginForm.get('password')?.invalid) {

              <!-- Password required -->
              @if (loginForm.get('password')?.hasError('required')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Password is required.</small>
                </div>
              }

              <!-- Password required -->
              @if (loginForm.get('password')?.hasError('minlength')) {
                <div class="d-block"> 
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Password must be at least 8 characters.</small>
                </div>
              }

              <!-- Password contains whitespace -->
              @if (loginForm.get('password')?.hasError('whitespace')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">whitespace is not allowed in password.</small>
                </div>
              }

              <!-- Password contains invalid special chars -->
              @if (loginForm.get('password')?.hasError('invalidSpecialChar')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Can't use special characters other than '_'.</small>
                </div>
              }
              @if (loginForm.get('password')?.hasError('invalidCredentials')) {
                <div class="d-block">
                  <i class="fa-solid fa-circle-exclamation text-danger me-1"></i>
                  <small class="text-danger">Username or Password are incorrect.</small>
                </div>
              }
            }

            <div class="d-flex mb-4 align-items-center mt-2">
              <label class="form-check mb-0">
                <span class="pe-2">Remember me</span>
                <input class="form-check-input" type="checkbox" checked="checked" />
              </label>
              <span class="ms-auto"><a [routerLink]="['']" class="forgot-pass">Forgot Password?</a></span>
            </div> 

            <input 
              class="btn btn-block btn-primary w-100 fw-semibold"
              type="submit" 
              [disabled]="loginForm.invalid" 
              value="Log In" 
            >

            <div class="sign-up mt-2">
              <p>
                Don't have an account? <a [routerLink]="['']">Sign up</a>
              </p>
            </div>

            <div class="social-login text-center">
              <span class="d-block text-left mt-4 mb-1 text-muted">&mdash; or login with &mdash;</span>
              <div class="fs-2">
                <a [routerLink]="['']" class="pe-2">
                  <i class="fa-brands fa-facebook"></i>
                </a>
                <a [routerLink]="['']" class="pe-2">
                  <i class="fa-brands fa-google"></i>
                </a>
              </div>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</section>